<section id="eventos" class="carrusel-eventos">
  <div class="carousel-wrap">
    <div class="carousel" id="carousel" tabindex="0">

      <!-- üçï Evento 1 -->
      <article class="slide">
        <div class="media">
          <img src="img/fondo22.jpg" alt="Pizza Fest">
          <div class="overlay">
            <div>
              <div class="badge">LA BONANZA</div>
              <h3 class="title">Reserve nuestro espacio</h3>
              <p class="desc">Ambiente c√≥modo y exclusivo, ideal para momentos especiales con tus seres queridos.</p>
            </div>
          </div>
        </div>
      </article>

      <!-- üçï Evento 2 -->
      <article class="slide">
        <div class="media">
          <img src="img/foto7.jpg" alt="Evento Especial">
          <div class="overlay">
            <div>
              <div class="badge">LA BONANZA</div>
              <h3 class="title">üçΩÔ∏è Platillos especiales</h3>
              <p class="desc">Sabores √∫nicos que har√°n de tu evento un momento inolvidable.</p>
            </div>
          </div>
        </div>
      </article>

      <!-- üçù Evento 3 -->
      <article class="slide">
        <div class="media">
          <img src="img/foto9.jpg" alt="Noche Italiana">
          <div class="overlay">
            <div>
              <div class="badge">LA BONANZA</div>
              <h3 class="title">Eventos especiales</h3>
              <p class="desc">Creamos experiencias √∫nicas y memorables para ti.</p>
            </div>
          </div>
        </div>
      </article>

    </div>

    <!-- ‚¨ÖÔ∏è‚û°Ô∏è Controles -->
    <div class="controls">
      <button class="btn left" id="prevBtn" aria-label="Anterior">
        <svg viewBox="0 0 24 24" width="28" height="28">
          <path d="M15 6 L9 12 L15 18" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
      <button class="btn right" id="nextBtn" aria-label="Siguiente">
        <svg viewBox="0 0 24 24" width="28" height="28">
          <path d="M9 6 L15 12 L9 18" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
    </div>

    <!-- üîò Indicadores -->
    <div class="dots" id="dots"></div>
  </div>
</section>

<!-- üß† Script -->
<script>
(function () {
  const carousel = document.getElementById("carousel");
  const slides = [...carousel.querySelectorAll(".slide")];
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const dotsWrap = document.getElementById("dots");
  let current = 0;

  slides.forEach((s, i) => {
    const dot = document.createElement("button");
    dot.className = "dot";
    dot.setAttribute("aria-label", "Ir al slide " + (i + 1));
    dot.addEventListener("click", () => goTo(i));
    dotsWrap.appendChild(dot);
  });
  const dots = [...dotsWrap.children];

  function updateActiveSlide() {
    const center = carousel.scrollLeft + carousel.clientWidth / 2;
    let closest = 0,
      min = Infinity;
    slides.forEach((s, i) => {
      const slideCenter = s.offsetLeft + s.clientWidth / 2;
      const dist = Math.abs(center - slideCenter);
      if (dist < min) {
        min = dist;
        closest = i;
      }
      s.classList.remove("active");
    });
    slides[closest].classList.add("active");
    current = closest;
    dots.forEach((d) => d.classList.remove("active"));
    dots[current]?.classList.add("active");
  }

  function clamp(i) {
    return i < 0 ? slides.length - 1 : i >= slides.length ? 0 : i;
  }

  function goTo(i) {
    current = clamp(i);
    const s = slides[current];
    const left = s.offsetLeft - (carousel.clientWidth - s.clientWidth) / 2;
    carousel.scrollTo({ left, behavior: "smooth" });
    setTimeout(updateActiveSlide, 250);
  }

  prevBtn.onclick = () => goTo(current - 1);
  nextBtn.onclick = () => goTo(current + 1);
  carousel.addEventListener("scroll", () => {
    clearTimeout(window._scrollTimer);
    window._scrollTimer = setTimeout(updateActiveSlide, 100);
  });

  // üì± soporte para arrastre t√°ctil
  let startX = 0;
  carousel.addEventListener("touchstart", (e) => (startX = e.touches[0].clientX));
  carousel.addEventListener("touchend", (e) => {
    const endX = e.changedTouches[0].clientX;
    const delta = endX - startX;
    if (Math.abs(delta) > 50) {
      delta < 0 ? goTo(current + 1) : goTo(current - 1);
    }
  });

  window.addEventListener("load", () => {
    goTo(0);
  });
})();
</script>

<!-- üìå Estilos -->
<style>
.carrusel-eventos {
  padding: 40px 0;
  background: transparent;
  position: relative;
  z-index: 1;
}

.carrusel-eventos * { box-sizing: border-box; }
.carrusel-eventos .carousel-wrap {
  max-width: 1200px;
  margin: 0 auto;
  position: relative;
}

.carrusel-eventos .carousel {
  display: flex;
  gap: 20px;
  overflow-x: auto;
  scroll-behavior: smooth;
  padding: 20px 0;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
}

.carrusel-eventos .slide {
  min-width: 85%;
  border-radius: 16px;
  overflow: hidden;
  background: rgba(255, 255, 255, 0.06);
  transition: transform 0.3s ease-out, box-shadow 0.3s ease-out, opacity 0.3s ease-out;
  transform: scale(0.9);
  opacity: 0.85;
  scroll-snap-align: center;
  text-align: center;
}

.carrusel-eventos .slide.active {
  transform: scale(1.07);
  opacity: 1;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
}

.carrusel-eventos .media {
  position: relative;
  aspect-ratio: 16/9;
  overflow: hidden;
}

.carrusel-eventos .media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.carrusel-eventos .overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding: 25px;
  color: #fff;
  background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.55) 70%);
}

.carrusel-eventos .badge {
  display: inline-flex;
  gap: 8px;
  align-items: center;
  background: rgba(255, 255, 255, 0.12);
  padding: 6px 12px;
  border-radius: 999px;
  font-weight: 600;
  margin-bottom: 10px;
}

.carrusel-eventos .title {
  font-size: 1.4rem;
  margin: 6px 0;
  font-weight: bold;
}

.carrusel-eventos .desc {
  font-size: 1rem;
  margin-top: 8px;
}

.carrusel-eventos .controls {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
}

.carrusel-eventos .btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: auto;
  background: rgba(0, 0, 0, 0.6);
  border: none;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.3s;
  z-index: 10;
}

.carrusel-eventos .btn svg path {
  stroke: #fff;
}

.carrusel-eventos .btn:hover {
  background: rgba(0, 0, 0, 0.85);
}

.carrusel-eventos .btn.left { left: 10px; }
.carrusel-eventos .btn.right { right: 10px; }

.carrusel-eventos .dots {
  display: flex;
  gap: 8px;
  justify-content: center;
  margin-top: 18px;
}

.carrusel-eventos .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  cursor: pointer;
}

.carrusel-eventos .dot.active {
  background: #ff7b00;
}

@media (max-width: 768px) {
  .carrusel-eventos .slide { min-width: 90%; }
  .carrusel-eventos .title { font-size: 1.2rem; }
  .carrusel-eventos .desc { font-size: 0.95rem; }
}
</style>